{% extends "base" %}
{% block main %}
<div class="content container">
    {{ content() }}
    <p>This is the page at '{{ Page.Route }}'</p>
  <div class="posts">
    {# {% set paginator = Paginate (where .Data.Pages "Type" "post") %}#}
    {% set paginator = paginate(selectPages(), size=5) %}
    {# {{ range $paginator.Pages }}#}
    {% for page in paginator.Items -%}
        </p>Page is {{ page.Route }}</p>
    <div class="post">
      <h1 class="post-title">
        <a href="{{ page.Permalink }}">{% if page.Draft -%}DRAFT - {% endif -%}{{ page.Title }}</a>
      </h1>
      <span class="post-date">{{ dateformat(page.Date, "%h %-d, %Y") }}{% if not(page.Site.Params.ReadingTime) -%} &middot; {{ page.ReadingTime }} minute read{% endif -%}{% if Site.DisqusShortname -%} &middot; <a href="{{ page.Permalink }}#disqus_thread">Comments</a>{% endif -%}

      {% if page.Category -%}
      <br/>
      Category:&nbsp;
      <a class="label" href="{{ page.Category.url }}">{{ page.Category.name }}</a>
      {% endif %}

      {% if page.Tags -%}
      <br/>
      Tags:&nbsp;
      {% for tag in page.Tags -%}<a class="label" href="{{ "/tags/" | absURL }}{{ tag.url | urlize }}">{{ tag.name }}</a>{% endfor -%}
      {% endif -%}</span>

      {% if Site.Params.dontTruncate -%}
        {{ page.content() | raw }}
      {% else -%}
        {% if page.Description -%}
        <p><em>{{ page.Description }}</em></p>
        {% endif -%}
        {{ page.summary() }}
        {% if page.Truncated -%}<a href="{{ page.Permalink }}">Read On &rarr;</a>{% endif -%}
      {% endif -%}
    </div>
    {% endfor -%}
    {# 'pagination.html' will use the variables from paginator object #}
    {# {% include "pagination" %} #}
  </div>
</div>

{% if Site.DisqusShortname -%}
<script type="text/javascript">
var disqus_shortname = {{ Site.DisqusShortname }};
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
{% endif %}
{% endblock %}
